import{d as a,w as n}from"./index.hQFG0jTX.js";import{a as e}from"./firebase.D9dyBQNl.js";const r=n(null),h=a(r,t=>!!t);async function s(){try{const t=e.currentUser;if(t){const o=await t.getIdToken(!0);await fetch("/api/auth/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o})})}}catch(t){throw console.error("Token refresh error:",t),t}}e.onAuthStateChanged(async t=>{r.set(t),t&&await s()});export{h as i,r as u};
